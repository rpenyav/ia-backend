<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>{{title}}</title>
  <link rel="stylesheet" href="/static/backoffice.css" />
</head>
<body>
  <div class="layout">
    <header>
      <div>
        <h1>{{title}}</h1>
        <p>Editar variable de entorno almacenada en BBDD</p>
      </div>
      <nav>
        <a href="/backoffice">ğŸ“Š Dashboard</a>
        <a href="/backoffice/users">ğŸ‘¤ Usuarios</a>
        <a href="/backoffice/settings">âš™ï¸ Settings</a>
        <a href="/backoffice/env"><strong>ğŸŒ± Env vars</strong></a>

        <form method="POST" action="/backoffice/logout" style="display:inline;">
          <button type="submit" class="btn-link" style="margin-left: 12px;">Salir</button>
        </form>
      </nav>
    </header>

    <section class="card">
      {{#if envVar}}
        <h2>Editar {{envVar.key}}</h2>

        <form method="POST" action="/backoffice/env/{{envVar.id}}/edit">
          <div class="field">
            <label>Clave</label>
            <input type="text" value="{{envVar.key}}" disabled />
          </div>

          <div class="field">
            <label>DescripciÃ³n</label>
            <input
              type="text"
              name="description"
              value="{{envVar.description}}"
              placeholder="DescripciÃ³n corta (opcional)"
            />
          </div>

          <div class="field">
            <label>Valor</label>
            <textarea
              name="value"
              rows="4"
              style="font-family: monospace; font-size: 13px;"
            >{{envVar.value}}</textarea>
          </div>

          <div class="field">
            <label style="display:flex; align-items:center; gap:6px;">
              <input
                type="checkbox"
                name="isSecret"
                {{#if envVar.isSecret}}checked{{/if}}
              />
              Marcar como secreto (no mostrar valor en el listado)
            </label>
          </div>

          <div style="margin-top: 12px; display:flex; gap:8px;">
            <button type="submit" class="btn-primary">Guardar cambios</button>
            <a href="/backoffice/env" class="btn-link">Cancelar</a>
          </div>
        </form>
      {{else}}
        <p class="muted">La variable no existe.</p>
        <p><a href="/backoffice/env">Volver al listado</a></p>
      {{/if}}
    </section>
  </div>
</body>
</html>
